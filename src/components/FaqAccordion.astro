---
// FaqAccordion.astro - Premium FAQ accordion
import { t, getLocaleFromUrl } from '../i18n/utils';
import type { Locale } from '../i18n/config';

interface Props {
  locale?: Locale;
  items?: { question: string; answer: string }[];
}

const locale = Astro.props.locale ?? getLocaleFromUrl(Astro.url);

// Build FAQ items from translations if no items prop provided
const defaultFaqItems = Array.from({ length: 6 }, (_, i) => ({
  question: t(locale, `faq.${i}.q`),
  answer: t(locale, `faq.${i}.a`),
}));

const { items = defaultFaqItems } = Astro.props;
---

<div class="flex flex-col gap-3" id="faq-accordion">
  {items.map((item, i) => (
    <details
      class="group border border-border-light rounded-xl bg-surface overflow-hidden transition-all duration-300 hover:border-gold/30 hover:shadow-[0_2px_12px_rgba(200,148,74,0.06)]"
    >
      <summary class="flex items-center justify-between gap-4 px-5 py-4 cursor-pointer select-none list-none text-left">
        <h3 class="font-heading font-semibold text-navy text-sm md:text-base pr-2">
          {item.question}
        </h3>
        <span class="shrink-0 w-5 h-5 flex items-center justify-center text-text-muted transition-transform duration-200 group-open:rotate-45" aria-hidden="true">
          <svg width="14" height="14" viewBox="0 0 14 14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
            <path d="M7 1v12M1 7h12"/>
          </svg>
        </span>
      </summary>
      <div class="px-5 pb-4">
        <p class="text-text-muted text-sm leading-relaxed">{item.answer}</p>
      </div>
    </details>
  ))}
</div>
