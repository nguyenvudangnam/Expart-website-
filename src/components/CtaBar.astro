---
// CtaBar.astro - Premium sticky bottom CTA bar for mobile
---

<div
  id="cta-bar"
  class="fixed bottom-0 left-0 right-0 z-40 md:hidden transition-all duration-300"
  aria-label="Book a consultation"
>
  <!-- Glassmorphism background -->
  <div class="absolute inset-0 bg-navy/95 backdrop-blur-xl border-t border-white/[0.08]"></div>
  <div class="absolute inset-0 shadow-[0_-4px_30px_rgba(0,0,0,0.2)]"></div>

  <div class="relative flex items-center justify-between px-4 py-3.5 gap-3">
    <p class="text-white/70 text-sm font-medium leading-tight">
      Need help? <span class="text-transparent bg-clip-text bg-gradient-to-r from-gold to-gold-bright font-semibold">Book a 60-min call</span>
    </p>
    <a
      href="/book"
      class="shrink-0 btn-gold text-white text-sm font-semibold px-5 py-2.5 rounded-lg"
    >
      Book Now â†’
    </a>
  </div>
</div>

<!-- Spacer so content doesn't hide behind sticky bar on mobile -->
<div class="h-[64px] md:hidden" aria-hidden="true"></div>

<script>
  // Hide CTA bar when user scrolls near top (they can see the nav CTA)
  const ctaBar = document.getElementById('cta-bar');
  if (ctaBar) {
    let lastScroll = 0;
    window.addEventListener('scroll', () => {
      const currentScroll = window.scrollY;

      if (currentScroll < 100) {
        ctaBar.style.transform = 'translateY(100%)';
        ctaBar.style.opacity = '0';
      } else {
        ctaBar.style.transform = 'translateY(0)';
        ctaBar.style.opacity = '1';
      }

      lastScroll = currentScroll;
    }, { passive: true });

    // Start hidden
    ctaBar.style.transform = 'translateY(100%)';
    ctaBar.style.opacity = '0';
  }
</script>
