---
// LeadMagnet.astro - Premium lead magnet / resource download box
import { t, getLocaleFromUrl, localizedUrl } from '../i18n/utils';
import type { Locale } from '../i18n/config';

interface Props {
  locale?: Locale;
  title?: string;
  description?: string;
  ctaLabel?: string;
  ctaHref?: string;
}

const locale = Astro.props.locale ?? getLocaleFromUrl(Astro.url);

const {
  title = t(locale, 'leadMagnet.defaultTitle'),
  description = t(locale, 'leadMagnet.defaultDesc'),
  ctaLabel = t(locale, 'leadMagnet.defaultCta'),
  ctaHref = localizedUrl(locale, '/resources'),
} = Astro.props;
---

<aside class="my-10 p-6 rounded-2xl bg-gradient-to-br from-navy to-navy-mid text-white border border-white/[0.06] shadow-[0_4px_30px_rgba(15,35,55,0.2)]" role="complementary">
  <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4">
    <div class="flex-1">
      <p class="text-xs font-semibold uppercase tracking-[0.15em] text-gold mb-1.5">{t(locale, 'leadMagnet.label')}</p>
      <h3 class="font-heading font-semibold text-lg mb-1">{title}</h3>
      <p class="text-white/55 text-sm leading-relaxed">{description}</p>
    </div>
    <a
      href={ctaHref}
      class="shrink-0 btn-gold inline-flex items-center gap-2 text-white text-sm font-semibold px-5 py-2.5 rounded-lg"
    >
      {ctaLabel}
    </a>
  </div>
</aside>
