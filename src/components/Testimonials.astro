---
// Testimonials.astro - Premium client testimonials (hidden until enabled)
import { t, getLocaleFromUrl } from '../i18n/utils';
import type { Locale } from '../i18n/config';
import testimonialsData from '../data/testimonials.json';

interface Props { locale?: Locale; }
const locale = Astro.props.locale ?? getLocaleFromUrl(Astro.url);

const { enabled, items } = testimonialsData;
---

{enabled && (
  <section id="testimonials" class="section-spacing bg-surface relative">
    <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-border to-transparent"></div>
    <div class="container-page">
      <div class="text-center max-w-2xl mx-auto mb-12">
        <div class="divider-gold mx-auto mb-6"></div>
        <h2 class="font-heading text-3xl md:text-4xl font-bold text-navy mb-4">
          {t(locale, 'testimonials.title')}
        </h2>
        <p class="text-text-muted text-lg">
          {t(locale, 'testimonials.subtitle')}
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto">
        {items.map(item => (
          <div class="card-premium p-6 rounded-2xl border border-border-light bg-cream/50">
            <!-- Stars -->
            <div class="flex gap-1 mb-4" aria-label={`${item.rating} out of 5 stars`}>
              {Array.from({ length: item.rating }).map(() => (
                <span class="text-gold" aria-hidden="true">★</span>
              ))}
            </div>
            <!-- Quote -->
            <blockquote class="text-text-primary text-sm leading-relaxed mb-5">
              "{item.text}"
            </blockquote>
            <!-- Attribution -->
            <div class="flex items-center gap-3">
              <div class="w-9 h-9 rounded-full bg-gradient-to-br from-navy to-navy-light flex items-center justify-center text-white text-sm font-semibold shrink-0">
                {item.name.charAt(0)}
              </div>
              <div>
                <p class="font-semibold text-navy text-sm">{item.name}</p>
                <p class="text-text-muted text-xs">{item.role} · {item.country}</p>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>
)}
